{% extends "dashboard.html" %}
{% load humanize %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
    <h2 class="mb-0">Strategic Cycles</h2>

    <!-- Create New Cycle Button -->
    <a class="btn btn-primary" href="{% url 'create_strategic_cycle' %}">
        + Create Strategic Cycle
    </a>
</div>

<div class="card">
    <div class="table-responsive">
        <table class="table table-striped table-bordered table-hover table-sm align-middle">
            <thead class="table-light">
            <tr>
                <th>#</th>
                <th>Name</th>
                <th>Time Horizon</th>
                <th>Horizon Type</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Duration (Days)</th>
                <th>Start Month</th>
                <th>Quarter</th>
                <th>Year</th>
                <th colspan="3" class="text-center">Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for cycle in strategic_cycles %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ cycle.name }}</td>
                <td>{{ cycle.time_horizon }}</td>
                <td>{{ cycle.time_horizon_type }}</td>
                <td>{{ cycle.start_date }}</td>
                <td>{{ cycle.end_date }}</td>
                <td>{{ cycle.duration_days|default:"N/A" }}</td>
                <td>{{ cycle.start_month_name|default:"N/A" }}</td>
                <td>{{ cycle.start_quarter|default:"N/A" }}</td>
                <td>{{ cycle.start_year|default:"N/A" }}</td>

                <!-- Update -->
                <td>
                    <a class="btn btn-warning btn-sm" href="{% url 'update_strategic_cycle' cycle.pk %}">
                        Update
                    </a>
                </td>

                <!-- Delete -->
                <td>
                    <a class="btn btn-danger btn-sm" href="{% url 'delete_strategic_cycle' cycle.pk %}">
                        Delete
                    </a>
                </td>

                <!-- View / Detail -->
                <td>
                    {% if cycle.slug %}
                    <a href="{% url 'strategic_action_plan_list' cycle.slug %}" class="btn btn-info btn-sm">
                        View Plans
                    </a>
                    {% else %}
                    N/A
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="14" class="text-center">No strategic cycles found.</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}
